<odoo>
    <!-- Inherit Sale Order PDF template to add product images and highlight discounts -->
    <template id="report_saleorder_document_custom" inherit_id="sale.report_saleorder_document">

        <!-- 1. Add a new column in the header for product images -->
        <xpath expr="//th[@name='th_description']" position="before">
            <th class="text-center">Image</th>
        </xpath>

        <!-- 2. Show product image for each order line -->
        <xpath expr="//td[@name='td_name']" position="before">
            <td style="text-align:center; width:80px;">
                <t t-if="line.product_id.image_1920">
                    <img t-att-src="image_data_uri(line.product_id.image_1920)"
                         style="max-height:60px; max-width:60px;"/>
                </t>
                <t t-else="">
                    <span>-</span>
                </t>
            </td>
        </xpath>

        <!-- 3. Highlight discounted products in green bold font -->
        <xpath expr="//td[@t-if='display_discount']" position="replace">
            <td class="text-end">
                <t t-if="line.discount &gt; 0">
                    <span style="color:green; font-weight:bold;">
                        <t t-esc="line.discount"/>%
                    </span>
                </t>
                <t t-else="">
                    <t t-esc="line.discount"/>%
                </t>
            </td>
        </xpath>

    </template>
</odoo>
